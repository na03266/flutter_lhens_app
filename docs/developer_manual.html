<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LH EnS Technical Documentation</title>
    <!-- CDN for Marked (Markdown Parser) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- CDN for Mermaid (Diagrams) -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <!-- CDN for Highlight.js (Code Highlighting) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        :root {
            --sidebar-width: 280px;
            --primary-color: #0088cc;
            --text-color: #333;
            --bg-color: #fff;
            --sidebar-bg: #f8f9fa;
            --border-color: #e9ecef;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            color: var(--text-color);
            background: var(--bg-color);
        }

        #sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            flex-shrink: 0;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
        }

        #sidebar h2 {
            padding: 0 20px;
            font-size: 1.25rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .nav-item {
            display: block;
            padding: 12px 20px;
            color: #495057;
            text-decoration: none;
            cursor: pointer;
            border-left: 4px solid transparent;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .nav-item:hover {
            background: #e9ecef;
            color: var(--primary-color);
        }

        .nav-item.active {
            background: #e3f2fd;
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            font-weight: 500;
        }

        #main {
            flex-grow: 1;
            overflow-y: auto;
            padding: 40px 60px;
            max-width: 1000px;
        }

        /* Markdown Styles */
        .markdown-body {
            line-height: 1.7;
        }

        .markdown-body h1 {
            font-size: 2.2em;
            border-bottom: 2px solid #eaecef;
            padding-bottom: 0.3em;
            margin-top: 0;
            margin-bottom: 24px;
        }

        .markdown-body h2 {
            font-size: 1.75em;
            border-bottom: 1px solid #eaecef;
            padding-bottom: 0.3em;
            margin-top: 36px;
            margin-bottom: 16px;
        }

        .markdown-body h3 {
            font-size: 1.4em;
            margin-top: 24px;
            margin-bottom: 16px;
        }

        .markdown-body ul,
        .markdown-body ol {
            padding-left: 2em;
        }

        .markdown-body li {
            margin-bottom: 0.5em;
        }

        .markdown-body code {
            background-color: #f1f3f5;
            border-radius: 4px;
            padding: 0.2em 0.4em;
            font-family: 'D2Coding', 'Consolas', monospace;
            font-size: 0.9em;
            color: #d63384;
        }

        .markdown-body pre {
            background-color: #212529;
            border-radius: 8px;
            padding: 16px;
            overflow: auto;
            margin: 20px 0;
        }

        .markdown-body pre code {
            background-color: transparent;
            padding: 0;
            color: #f8f9fa;
            font-size: 0.95em;
        }

        .markdown-body blockquote {
            border-left: 4px solid #ced4da;
            color: #6c757d;
            padding: 10px 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 0 4px 4px 0;
        }

        .markdown-body table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 0.95em;
        }

        .markdown-body table th,
        .markdown-body table td {
            border: 1px solid #dee2e6;
            padding: 12px;
        }

        .markdown-body table th {
            background-color: #f1f3f5;
            font-weight: 600;
        }

        .markdown-body table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .doc-section {
            margin-bottom: 60px;
        }

        .doc-divider {
            border: 0;
            height: 1px;
            background: #dee2e6;
            margin: 40px 0;
        }

        /* Mermaid Adjustments */
        .mermaid {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            background: #fff;
        }

        @media print {
            #sidebar {
                display: none;
            }

            #main {
                padding: 0;
                max-width: 100%;
                overflow: visible;
            }

            body {
                height: auto;
            }
        }
    </style>
</head>

<body>

    <div id="sidebar">
        <h2>LH EnS ë¬¸ì„œ</h2>
        <div id="nav-links"></div>
    </div>

    <div id="main">
        <div class="markdown-body" id="content"></div>
    </div>

    <!-- Raw Markdown Content Data -->
    <script type="text/markdown" id="md-00">
# ë¬¸ì„œ ëª©ë¡ (Index)

ë³¸ ë¬¸ì„œëŠ” LH EnS í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ë° ìš´ì˜ ë¬¸ì„œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

## 1. ë¬¸ì„œ ì²´ê³„

| ë¬¸ì„œ ID | ë¬¸ì„œëª… | ì£¼ìš” ë‚´ìš© | ëŒ€ìƒ ë…ì |
|:---:|:---|:---|:---:|
| **00** | [INDEX](00_INDEX.md) | ë¬¸ì„œ ëª©ë¡ ë° ê°€ì´ë“œ | ì „ì› |
| **01** | [OVERVIEW](01_OVERVIEW.md) | í”„ë¡œì íŠ¸ ê°œìš”, ê¸°ìˆ  ìŠ¤íƒ, ë¦´ë¦¬ì¦ˆ ìš”ì•½ | ì „ì› |
| **02** | [ARCHITECTURE](02_ARCHITECTURE.md) | ì‹œìŠ¤í…œ êµ¬ì„±ë„, ì•„í‚¤í…ì²˜ (Flutter/NestJS) | ê°œë°œ/ìš´ì˜ |
| **03** | [API_SPEC](03_API_SPEC.md) | API ëª…ì„¸, ì¸ì¦/ì—ëŸ¬ ê·œì•½ (Client Code ê¸°ë°˜ ì¶”ë¡ ) | ê°œë°œ |
| **04** | [DATA_MODEL](04_DATA_MODEL.md) | ë°ì´í„° ëª¨ë¸, DTO ë§¤í•‘ | ê°œë°œ/DBA |
| **05** | [DEPLOYMENT_RUNBOOK](05_DEPLOYMENT_RUNBOOK.md) | ë°°í¬ ì ˆì°¨, í™˜ê²½ ì„¤ì •, ìš´ì˜/ì¥ì•  ëŒ€ì‘ | ìš´ì˜/DevOps |
| **06** | [TESTING_QA](06_TESTING_QA.md) | í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ, TC, ê²°í•¨ ê¸°ì¤€ | QA/ê°œë°œ |
| **07** | [SECURITY_CHECKLIST](07_SECURITY_CHECKLIST.md) | ë³´ì•ˆ ì ê²€ ë¦¬ìŠ¤íŠ¸ (ì¸ì¦, ë„¤íŠ¸ì›Œí¬ ë“±) | ë³´ì•ˆ/ê°œë°œ |
| **08** | [CHANGELOG_TEMPLATE](08_CHANGELOG_TEMPLATE.md) | ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ì‘ì„± í…œí”Œë¦¿ | PM/ê°œë°œ |

## 2. ê¶Œì¥ ì½ê¸° ìˆœì„œ
- **ì‹ ê·œ ì…ì‚¬ì/ì¸ìˆ˜ì¸ê³„**: 01 -> 02 -> 05
- **ë°±ì—”ë“œ/API ê°œë°œì**: 02 -> 03 -> 04
- **ì˜¤í”ˆ/ìš´ì˜ ì´ê´€ ì‹œ**: 05 -> 07 -> 01 (ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ í™•ì¸)

---
> **Note**: NestJS ì„œë²„ ì €ì¥ì†Œ(`G:\lh_app_back`) ì ‘ê·¼ ê¶Œí•œ ë¶€ì¬ë¡œ, ì„œë²„ ì¸¡ ìƒì„¸ êµ¬í˜„ ë‚´ìš©ì€ Flutter í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ë¡ ë˜ì—ˆê±°ë‚˜ TBD(To Be Determined)ë¡œ í‘œê¸°ë˜ì—ˆìŠµë‹ˆë‹¤.
</script>

    <script type="text/markdown" id="md-01">
# 01. í”„ë¡œì íŠ¸ ê°œìš” (Overview)

## 1. í”„ë¡œì íŠ¸ ëª©ì 
**LH EnS Flutter App**ì€ ì—…ë¬´ ì§€ì›ì„ ìœ„í•œ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
ê´€ë¦¬ìì™€ ì‚¬ìš©ìê°€ ê²Œì‹œíŒ, ì±„íŒ…, ì•Œë¦¼ ë“±ì˜ ê¸°ëŠ¥ì„ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ ì†Œí†µí•˜ê³  ì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## 2. ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)
*ì†ŒìŠ¤ì½”ë“œ(`pubspec.yaml`, `main.dart`) ë¶„ì„ ê¸°ë°˜*

| êµ¬ë¶„ | ê¸°ìˆ  / ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ (Min) | ë¹„ê³  |
|:---:|:---:|:---:|:---|
| **Language** | Dart | 3.x | Flutter 3.9.0 í˜¸í™˜ |
| **Framework** | Flutter | 3.22.0+ (ì¶”ì •) | SDK Constraint `^3.9.0` (Dart) |
| **State Mgt** | **Riverpod** | 2.5.3 | `flutter_riverpod`, `riverpod_annotation` |
| **Routing** | **GoRouter** | 14.6.1 | `go_router` |
| **Network** | Dio | 5.9.0 | with `retrofit` 4.6.0 |
| **Push** | Firebase FCM | 16.0.4 | `firebase_messaging` |
| **Storage** | Flutter Secure Storage | 9.2.4 | í† í° ì €ì¥ìš© |
| **Backend** | NestJS | TBD | *Repository ì ‘ê·¼ ë¶ˆê°€* |

## 3. ì£¼ìš” ê¸°ëŠ¥ (Key Features)
*Flutter `lib/` í´ë” êµ¬ì¡° ê¸°ë°˜*

*   **ì¸ì¦ (User/Auth)**
    *   ë¡œê·¸ì¸ (Auto Login ì§€ì›), ë¡œê·¸ì•„ì›ƒ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (`user/repository/user_me_repository.dart`)
    *   í† í° ê°±ì‹  (Refresh Token)
*   **ê²Œì‹œíŒ/ì»¤ë®¤ë‹ˆí‹° (Drawer/Board)**
    *   ê³µì§€ì‚¬í•­, êµìœ¡/í–‰ì‚¬, ì œì•ˆ(Complaint)
    *   ê¸‰ì—¬ ì¡°íšŒ(`salary`), ì„¤ë¬¸ì¡°ì‚¬(`survey`)
*   **ìœ„í—˜ ì‹ ê³  (Risk)**
    *   ìœ„í—˜ ì‹ ê³  ê²Œì‹œê¸€ ì¡°íšŒ/ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
    *   ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ ì‘ì„± (`risk/repository/risk_repository.dart`)
*   **ì±„íŒ… (Chat)**
    *   ì±„íŒ…ë°© ëª©ë¡, ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡ (`chat/view/chat_lobby_screen.dart`)
    *   Socket.io ì—°ë™ (`socket_io_client`)
*   **ì•Œë¦¼ (Alarm)**
    *   FCM í‘¸ì‹œ ì•Œë¦¼ ìˆ˜ì‹  ë° ëª©ë¡ ì¡°íšŒ

## 4. ë¦´ë¦¬ì¦ˆ ì •ë³´
*   **App Version**: 1.0.0+1 (`pubspec.yaml`)
*   **Target Platforms**: Android, iOS
*   **Server Endpoint**: `http://110.10.147.37/app` (ê°œë°œ/ìš´ì˜ ê³µí†µ í˜¹ì€ ë¶„ë¦¬ í•„ìš” í™•ì¸ TBD)

## 5. ì”ì—¬ ì´ìŠˆ ë° ë¦¬ìŠ¤í¬
*   **Backend ì ‘ê·¼ ê¶Œí•œ**: í˜„ì¬ ë°±ì—”ë“œ ì†ŒìŠ¤ì½”ë“œ í™•ì¸ ë¶ˆê°€ë¡œ, DB ìŠ¤í‚¤ë§ˆ ë° ì„œë²„ ë¡œì§ ìƒì„¸ ë¬¸ì„œí™” ë¯¸ë¹„.
*   **Hardcoded IP**: `lib/common/const/data.dart`ì— IP(`110.10.147.37`)ê°€ í•˜ë“œì½”ë”© ë˜ì–´ ìˆìŒ. í™˜ê²½ ë³€ìˆ˜(`flutter_dotenv` ë“±)ë¡œ ë¶„ë¦¬ í•„ìš”.
*   **SSL Bypass**: `main.dart` ë‚´ `HttpOverrides`ê°€ íŠ¹ì • ë„ë©”ì¸(`lhes.co.kr` ë“±)ì— ëŒ€í•´ ì¸ì¦ì„œ ê²€ì¦ì„ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìŒ. ìš´ì˜ ë°°í¬ ì‹œ ë³´ì•ˆ ì·¨ì•½ì ì´ ë  ìˆ˜ ìˆìŒ.
</script>

    <script type="text/markdown" id="md-02">
# 02. ì•„í‚¤í…ì²˜ (Architecture)

## 1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì„±ë„ (System Context)

```mermaid
graph TD
    User([ì‚¬ìš©ì app])
    LB[Load Balancer / Nginx (TBD)]
    API[NestJS API Server]
    DB[(MySQL/TBD)]
    FCM[Firebase Cloud Messaging]
    Socket[Socket.IO Server]

    User -- HTTP/REST --> API
    User -- WebSocket --> Socket
    API -- Read/Write --> DB
    API -- Push Request --> FCM
    FCM -- Push Notification --> User
```

## 2. Flutter í´ë¼ì´ì–¸íŠ¸ ì•„í‚¤í…ì²˜

### 2.1 ë””ë ‰í† ë¦¬ êµ¬ì¡° (Feature-first Pattern)
ê¸°ëŠ¥(Feature) ë‹¨ìœ„ë¡œ í´ë”ë¥¼ êµ¬ë¶„í•˜ê³ , ê³µí†µ ëª¨ë“ˆì€ `common`ì— ë°°ì¹˜í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

```text
lib/
â”œâ”€â”€ common/             # ê³µí†µ ì»´í¬ë„ŒíŠ¸, ìƒìˆ˜, ìœ í‹¸ë¦¬í‹°, ë„¤íŠ¸ì›Œí¬ ì„¤ì •
â”‚   â”œâ”€â”€ dio/            # Dio í´ë¼ì´ì–¸íŠ¸ ë° Interceptor (Auth Token ì²˜ë¦¬)
â”‚   â”œâ”€â”€ provider/       # ì „ì—­ Provider (GoRouter ë“±)
â”‚   â””â”€â”€ secure_storage/ # ë¡œì»¬ ë³´ì•ˆ ì €ì¥ì†Œ ê´€ë¦¬
â”œâ”€â”€ user/               # íšŒì›/ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”œâ”€â”€ auth/           # ë¡œê·¸ì¸, í† í° ê´€ë¦¬ ë¡œì§
â”‚   â”œâ”€â”€ repository/     # íšŒì› API (Retrofit)
â”‚   â””â”€â”€ view/           # ë¡œê·¸ì¸ í™”ë©´ ë“±
â”œâ”€â”€ risk/               # ìœ„í—˜ì„± í‰ê°€ ê¸°ëŠ¥
â”œâ”€â”€ drawer/             # í–„ë²„ê±° ë©”ë‰´ í•˜ìœ„ ê¸°ëŠ¥ (ê³µì§€, ê¸‰ì—¬, ì„¤ë¬¸ ë“±)
â”œâ”€â”€ chat/               # ì±„íŒ… ê¸°ëŠ¥
â””â”€â”€ main.dart           # ì•± ì§„ì…ì , ProviderScope, Router ì„¤ì •
```

### 2.2 ìƒíƒœ ê´€ë¦¬ (State Management)
*   **Riverpod**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
*   `Provider`, `StateNotifierProvider` ë“±ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UIë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.
*   API í˜¸ì¶œ ê²°ê³¼ëŠ” Repository -> Provider ìˆœìœ¼ë¡œ ì „ë‹¬ë˜ì–´ UI(ConsumerWidget)ì—ì„œ êµ¬ë…í•©ë‹ˆë‹¤.

### 2.3 ë¼ìš°íŒ… (Routing)
*   **GoRouter**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤ (`common/provider/go_router.dart`).
*   `authProvider`ì˜ ë¦¬ë””ë ‰ì…˜ ë¡œì§(`redirectLogic`)ì„ í†µí•´ ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë¡œê·¸ì¸ í™”ë©´ ë˜ëŠ” ë©”ì¸ í™”ë©´ìœ¼ë¡œ ìë™ ì´ë™í•©ë‹ˆë‹¤.

### 2.4 ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ
*   **Dio + Retrofit** ì¡°í•©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
*   `CustomInterceptor` (`common/dio/dio.dart`)ì—ì„œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
    *   **Request**: `accessToken: 'true'` í—¤ë”ê°€ ìˆìœ¼ë©´ Storageì˜ í† í°ì„ `Authorization: Bearer` í—¤ë”ë¡œ êµì²´.
    *   **Error (401)**: í† í° ë§Œë£Œ ì‹œ `/auth/token` ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ í† í° ê°±ì‹  ì‹œë„ í›„ ì¬ìš”ì²­ (Silent Refresh).

## 3. NestJS ì„œë²„ ì•„í‚¤í…ì²˜ (ì¶”ì •)
*ì†ŒìŠ¤ì½”ë“œ ì ‘ê·¼ ë¶ˆê°€ë¡œ Client API í˜¸ì¶œ íŒ¨í„´ ê¸°ë°˜ ì¶”ì •*

*   **API êµ¬ì¡°**: RESTful API
*   **ì¸ì¦**: JWT (Access + Refresh Token) ë°©ì‹
*   **ì£¼ìš” ëª¨ë“ˆ (ì˜ˆìƒ)**:
    - UserModule (`/user`)
    - AuthModule (`/auth`)
    - BoardRiskModule (`/board-risk`)
    - ChatModule (WebSocket Gateway í¬í•¨ ì˜ˆìƒ)
</script>

    <script type="text/markdown" id="md-03">
# 03. API ëª…ì„¸ (API Specification)

## 1. ê°œìš”
*   **Base URL**: `http://110.10.147.37/app` (ê°œë°œ/ìš´ì˜ ê³µí†µ)
*   **Protocol**: HTTP/1.1
*   **Content-Type**: `application/json`

## 2. ì¸ì¦ (Authentication)
*   **ë°©ì‹**: Bearer Token (JWT)
*   **Header ê·œì•½**:
    *   Client Request Header: `accessToken: 'true'` (Dio Interceptorê°€ `Authorization: Bearer ...`ë¡œ ë³€í™˜)
    *   `refreshToken: 'true'` (í† í° ê°±ì‹  ì‹œ ì‚¬ìš©)
*   **Automatic Refresh**:
    *   401 Unauthorized ë°œìƒ ì‹œ `CustomInterceptor`ê°€ ìë™ìœ¼ë¡œ `/auth/token`ì„ í˜¸ì¶œí•˜ì—¬ í† í° ê°±ì‹  í›„ ì¬ìš”ì²­.

## 3. ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ (Endpoints)
*Client Repository Code (`retrofit`) ê¸°ë°˜ ì¶”ë¡ *

### 3.1 íšŒì› (User) - `/user`
| Method | Path | Auth | ì„¤ëª… | Request | Response |
|:---:|:---|:---:|:---|:---|:---|
| GET | `/me` | O | ë‚´ ì •ë³´ ì¡°íšŒ | - | `UserModel` |
| PATCH | `/password` | O | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | `ChangePasswordDto` | Top-level `void` |
| POST | `/auth/token` | R | í† í° ê°±ì‹  | `RefreshToken Header` | `{accessToken}` |

### 3.2 ìœ„í—˜ì„± í‰ê°€ (Risk) - `/board-risk`
| Method | Path | Auth | ì„¤ëª… | Request | Response |
|:---:|:---|:---:|:---|:---|:---|
| GET | `/` | O | ê²Œì‹œê¸€ ëª©ë¡ (Pagination) | `PagePaginationParams` | `PagePagination<PostModel>` |
| GET | `/{wrId}` | O | ê²Œì‹œê¸€ ìƒì„¸ | - | `PostDetailModel` |
| POST | `/` | O | ê²Œì‹œê¸€ ì‘ì„± | `CreatePostDto` | `String?` (ID) |
| POST | `/comment` | O | ëŒ“ê¸€ ì‘ì„± | `CreatePostDto`, `parentId` | `String?` |
| POST | `/comment/reply`| O | ëŒ€ëŒ“ê¸€ ì‘ì„± | `CreatePostDto`, `parentId`, `commentId` | `String?` |
| PATCH | `/` | O | ê²Œì‹œê¸€ ìˆ˜ì • | `CreatePostDto`, `wrId` | `String?` |
| DELETE | `/` | O | ê²Œì‹œê¸€ ì‚­ì œ | `wrId` | `String?` |

### 3.3 ì±„íŒ… (Chat) - `/room`
| Method | Path | Auth | ì„¤ëª… | Request | Response |
|:---:|:---|:---:|:---|:---|:---|
| GET | `/room` | O | ì±„íŒ…ë°© ëª©ë¡ | `CursorPaginationParams` | `CursorPagination<ChatRoom>` |
| POST | `/room` | O | ì±„íŒ…ë°© ìƒì„± | `CreateChatRoomDto` | `String?` |
| GET | `/room/{id}` | O | ì±„íŒ…ë°© ìƒì„¸ ì •ë³´ | - | `ChatRoomDetail` |
| PATCH | `/room/{id}` | O | ì±„íŒ…ë°© ìˆ˜ì • | `CreateChatRoomDto` | `String` |
| DELETE| `/room/{id}` | O | ì±„íŒ…ë°© ë‚˜ê°€ê¸° | - | `String` |

### 3.4 ë¶€ì„œ/ì¡°ì§ (Department) - `/department`
| Method | Path | Auth | ì„¤ëª… | Request | Response |
|:---:|:---|:---:|:---|:---|:---|
| GET | `/` | O | ë¶€ì„œ ëª©ë¡ | - | `DepartmentModelList` |
| GET | `/{id}` | O | ë¶€ì„œì› ì¡°íšŒ | - | `DepartmentDetailModel` |

### 3.5 ê¸‰ì—¬ (Salary) - `/salary`
| Method | Path | Auth | ì„¤ëª… | Request | Response |
|:---:|:---|:---:|:---|:---|:---|
| GET | `/` | O | ê¸‰ì—¬ ëª©ë¡ | `year` | `SalaryModel` |
| GET | `/html/{id}` | O | ê¸‰ì—¬ ëª…ì„¸ì„œ(HTML) | - | `String` (HTML) |

## 4. ì—ëŸ¬ ê·œì•½ (Error Protocol)
*   **HTTP Status Code**:
    *   `200/201`: ì„±ê³µ
    *   `401`: ì¸ì¦ ì‹¤íŒ¨ (í† í° ë§Œë£Œ ë“±) -> **Interceptorê°€ ìë™ ì²˜ë¦¬**
    *   `500`: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
*   **í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬**:
    *   DioException ìºì¹˜ í›„ ë¡œê¹….
    *   401 ì¬ë°œê¸‰ ì‹¤íŒ¨ ì‹œ ê°•ì œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ (`ref.read(authProvider.notifier).logout()`).
</script>

    <script type="text/markdown" id="md-04">
# 04. ë°ì´í„° ëª¨ë¸ (Data Model)

## 1. ê°œìš”
ë³¸ ë¬¸ì„œëŠ” Flutter í´ë¼ì´ì–¸íŠ¸ì˜ DTO ë° Model í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
ì„œë²„ DB ìŠ¤í‚¤ë§ˆ(Entity)ëŠ” ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ëª¨ë¸ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.

## 2. ì£¼ìš” ëª¨ë¸ (Flutter Models)

### 2.1 íšŒì› (UserModel)
*   **ì‹ë³„ì**: `id` (String/Int ì¶”ì •)
*   **ì£¼ìš” í•„ë“œ**:
    *   `username`: ë¡œê·¸ì¸ ì•„ì´ë””
    *   `nickname`: ì‚¬ìš©ì ì´ë¦„
    *   `email`: ì´ë©”ì¼ (Optional)
    *   `imageUrl`: í”„ë¡œí•„ ì´ë¯¸ì§€ URL
    *   `department`: ì†Œì† ë¶€ì„œ (`DepartmentModel`)

### 2.2 ê²Œì‹œê¸€ (PostModel / Risk)
*   **ì‹ë³„ì**: `wrId` (String) - ì›ê¸€ ID
*   **ì£¼ìš” í•„ë“œ**:
    *   `title`: ì œëª©
    *   `content`: ë‚´ìš© (`PostDetailModel`ì—ë§Œ í¬í•¨ë  ìˆ˜ ìˆìŒ)
    *   `author`: ì‘ì„±ì (`UserModel`)
    *   `createdAt`: ì‘ì„±ì¼ì‹œ
    *   `replyCount`: ëŒ“ê¸€ ìˆ˜

### 2.3 ì±„íŒ…ë°© (ChatRoom)
*   **ì‹ë³„ì**: `id` (String)
*   **ì£¼ìš” í•„ë“œ**:
    *   `title`: ë°© ì œëª©
    *   `users`: ì°¸ì—¬ì ëª©ë¡ (`List<UserModel>`)
    *   `lastMessage`: ë§ˆì§€ë§‰ ë©”ì‹œì§€ ë‚´ìš©
    *   `lastMessageAt`: ë§ˆì§€ë§‰ ë©”ì‹œì§€ ì‹œê°„

### 2.4 ë¶€ì„œ (DepartmentModel)
*   **ì‹ë³„ì**: `id` (Int)
*   **ì£¼ìš” í•„ë“œ**:
    *   `name`: ë¶€ì„œëª…
    *   `parentId`: ìƒìœ„ ë¶€ì„œ ID (ê³„ì¸µ êµ¬ì¡°)

### 2.5 ê¸‰ì—¬ (SalaryModel)
*   **ì‹ë³„ì**: `paymentDate` (String YYYY-MM) ë“±
*   **ì£¼ìš” í•„ë“œ**:
    *   `totalAmount`: ì‹¤ ìˆ˜ë ¹ì•¡
    *   `items`: ê¸‰ì—¬ ìƒì„¸ í•­ëª© ë¦¬ìŠ¤íŠ¸
    *   `htmlContent`: ëª…ì„¸ì„œ HTML ì›ë³¸ (ìƒì„¸ ì¡°íšŒ ì‹œ)

## 3. ê³µí†µ ì‘ë‹µ ë˜í¼ (Pagination)
### 3.1 PagePagination<T>
ì¼ë°˜ ê²Œì‹œíŒ í˜ì´ì§• ì²˜ë¦¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
*   `data`: `List<T>` (ì‹¤ì œ ë°ì´í„° ëª©ë¡)
*   `meta`: í˜ì´ì§€ ë©”íƒ€ ë°ì´í„° (`totalCount`, `count` ë“±)

### 3.2 CursorPagination<T>
ì±„íŒ…/ë¬´í•œìŠ¤í¬ë¡¤ ë“±ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
*   `data`: `List<T>`
*   `meta`: `CursorPaginationMeta` (`count`, `hasMore`) -> `hasMore`ê°€ `true`ë©´ ë‹¤ìŒ ë°ì´í„° ìš”ì²­ ê°€ëŠ¥.

## 4. ë°ì´í„°ë² ì´ìŠ¤ ERD (ì¶”ì •)
*ì„œë²„ ì½”ë“œê°€ ì—†ì–´ ì •í™•í•œ ê´€ê³„ëŠ” ë¶ˆëª…í™•í•˜ë‚˜, DTO êµ¬ì¡°ìƒ ì•„ë˜ ê´€ê³„ê°€ ìœ ì¶”ë¨.*

```mermaid
erDiagram
    Users ||--o{ Posts : writes
    Users ||--o{ ChatRooms : joins
    Departments ||--|{ Users : has
    Posts ||--o{ Comments : has
    ChatRooms ||--o{ Messages : contains

    Users {
        string id PK
        string username
        string password_hash
        int department_id FK
    }

    Departments {
        int id PK
        string name
        int parent_id
    }

    Posts {
        string wr_id PK
        string title
        text content
        string user_id FK
        datetime created_at
    }
```
</script>

    <script type="text/markdown" id="md-05">
# 05. ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ (Deployment & Runbook)

## 1. í™˜ê²½ ì„¤ì • (Configuration)

### 1.1 Flutter (Client)
í˜„ì¬ ì†ŒìŠ¤ì½”ë“œ ìƒ `lib/common/const/data.dart`ì— ì„œë²„ ì£¼ì†Œê°€ í•˜ë“œì½”ë”© ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ìš´ì˜ í™˜ê²½ ë¶„ë¦¬ë¥¼ ìœ„í•´ `.env` ë„ì… í˜¹ì€ Build Flavors ì ìš©ì´ ê¶Œì¥ë©ë‹ˆë‹¤.
```dart
// lib/common/const/data.dart
final defaultIp = '110.10.147.37/app'; // [ì£¼ì˜] ìš´ì˜ ë°°í¬ ì‹œ í™•ì¸ í•„ìš”
```

### 1.2 NestJS (Server)
*ì†ŒìŠ¤ì½”ë“œ ë¯¸í™•ì¸ìœ¼ë¡œ ì¼ë°˜ì ì¸ NestJS ìš´ì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê¸°ìˆ í•©ë‹ˆë‹¤.*
`.env` íŒŒì¼ì— ì•„ë˜ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
```bash
NODE_ENV=production
PORT=3000
DB_HOST=localhost
DB_USER=root
DB_PASS=[PLACEHOLDER]
DB_NAME=lhens_db
JWT_SECRET=[PLACEHOLDER]
```

## 2. ë°°í¬ ì ˆì°¨ (Deployment Process)

### 2.1 Android ë°°í¬
1.  **KeyStore ì¤€ë¹„**: `lhens_key.jks` íŒŒì¼ í™•ë³´ ë° `android/key.properties` ì„¤ì •.
2.  **Version Code ì¦ê°€**: `pubspec.yaml`ì˜ `version: 1.0.0+1` ìˆ˜ì • (+2).
3.  **ë¹Œë“œ**:
    ```bash
    flutter clean
    flutter pub get
    flutter build apk --release
    # ë˜ëŠ” App Bundle
    flutter build appbundle --release
    ```
4.  **ì‚°ì¶œë¬¼**: `build/app/outputs/flutter-apk/app-release.apk`

### 2.2 iOS ë°°í¬ (Mac Only)
1.  **Xcode ì„¤ì •**: Signing & Capabilitiesì—ì„œ Team ì„ íƒ ë° Provisioning Profile ì„¤ì •.
2.  **ë¹Œë“œ**:
    ```bash
    flutter build ipa --release
    ```
3.  **ì—…ë¡œë“œ**: Xcode Organizer ë˜ëŠ” Transporter ì•±ì„ í†µí•´ App Store Connect ì—…ë¡œë“œ.

### 2.3 NestJS ì„œë²„ ë°°í¬ (Runbook)
*ì‚¬ìš©ì ê°€ì´ë“œ(pm2) ê¸°ë°˜*
1.  **ì†ŒìŠ¤ ì—…ë°ì´íŠ¸**: `git pull origin main`
2.  **ì˜ì¡´ì„± ì„¤ì¹˜**: `npm install`
3.  **ë¹Œë“œ**:
    ```bash
    npm run build
    ```
4.  **ì„œë¹„ìŠ¤ ì¬ì‹œì‘ (PM2)**:
    ```bash
    pm2 restart 0
    # ë˜ëŠ”
    pm2 reload all
    ```

## 3. ì¥ì•  ëŒ€ì‘ (Troubleshooting)

### 3.1 [ì¥ì• ] ì•±ì—ì„œ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨
*   **ì¦ìƒ**: ë¬´í•œ ë¡œë”© í˜¹ì€ "ì„œë²„ ì—°ê²° ì‹¤íŒ¨" í† ìŠ¤íŠ¸ ë°œìƒ.
*   **ì›ì¸**:
    *   ì„œë²„(NestJS) ë‹¤ìš´.
    *   í´ë¼ì´ì–¸íŠ¸ `data.dart`ì˜ IPê°€ ë³€ê²½ë¨.
    *   SSL ì¸ì¦ì„œ ë§Œë£Œ (`main.dart`ì—ì„œ Bypass ì¤‘ì´ë‚˜, ì„œë²„ ì¸ì¦ì„œ ìì²´ê°€ ë§Œë£Œë˜ë©´ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥).
*   **ì¡°ì¹˜**:
    1.  ì„œë²„ ìƒíƒœ í™•ì¸ (`pm2 list`, `pm2 logs`).
    2.  `http://110.10.147.37/app/api` ì§ì ‘ í˜¸ì¶œ í…ŒìŠ¤íŠ¸.

### 3.2 [ì¥ì• ] ë¡œê·¸ì¸ í’€ë¦¼ ë°˜ë³µ
*   **ì›ì¸**: Refresh Token ë§Œë£Œ í˜¹ì€ DB ìƒì˜ ìœ íš¨í•˜ì§€ ì•Šì€ í† í°.
*   **ì¡°ì¹˜**:
    1.  ì‚¬ìš©ìì—ê²Œ ì¬ë¡œê·¸ì¸ ì•ˆë‚´.
    2.  ì„œë²„ ë¡œê·¸ì—ì„œ 401 ë¹ˆë„ í™•ì¸.

### 3.3 [ìš´ì˜] DB ë§ˆì´ê·¸ë ˆì´ì…˜
ë°±ì—”ë“œ ë°°í¬ ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìˆ˜ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
# TypeORM ì‚¬ìš© ì‹œ (ì˜ˆì‹œ)
npm run typeorm migration:run
```
</script>

    <script type="text/markdown" id="md-06">
# 06. í…ŒìŠ¤íŠ¸ ë° QA ê°€ì´ë“œ (Testing & QA)

## 1. í…ŒìŠ¤íŠ¸ í™˜ê²½
*   **Unit/Widget Test**: Flutter ë‚´ì¥ `test` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©.
*   **Integration Test**: ì‹¤ì œ ê¸°ê¸° ë˜ëŠ” ì—ë®¬ë ˆì´í„° í•„ìš”.

## 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•
ì†ŒìŠ¤ì½”ë“œ ë£¨íŠ¸(`G:\lhens_app`)ì—ì„œ ì‹¤í–‰:
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# íŠ¹ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
flutter test test/widget_test.dart
```

## 3. í•µì‹¬ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ (UAT Checklist)
ë°°í¬ ì „ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•  ì²´í¬ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

| ID | ì‹œë‚˜ë¦¬ì˜¤ | ê¸°ëŒ€ ê²°ê³¼ | í†µê³¼ ì—¬ë¶€ |
|:---:|:---|:---|:---:|
| TC-01 | **ë¡œê·¸ì¸** | ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ë©”ì¸ í™”ë©´ ì§„ì… ì„±ê³µ, í† í° ì €ì¥ë¨ | |
| TC-02 | **ìë™ ë¡œê·¸ì¸** | ì•± ì¬ì‹¤í–‰ ì‹œ ë¡œê·¸ì¸ í™”ë©´ ì—†ì´ ë©”ì¸ í™”ë©´ ì§„ì… | |
| TC-03 | **ìœ„í—˜ì„± í‰ê°€ ì‘ì„±** | ê¸€ ì‘ì„± í›„ ëª©ë¡ ìµœìƒë‹¨ ë…¸ì¶œ, ìƒì„¸ ì§„ì… ê°€ëŠ¥ | |
| TC-04 | **ì±„íŒ…ë°© ìƒì„±** | ì‚¬ìš©ì ì´ˆëŒ€ í›„ ì±„íŒ…ë°© ìƒì„± ì™„ë£Œ, ë©”ì‹œì§€ ì „ì†¡ ë° ìˆ˜ì‹ (ì–‘ë°©í–¥) | |
| TC-05 | **ì•Œë¦¼ ìˆ˜ì‹ ** | ì•± ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œ FCM í‘¸ì‹œ ì•Œë¦¼ ë„ì°© ë° íƒ­ ì‹œ í•´ë‹¹ í™”ë©´ ì´ë™ | |
| TC-06 | **ì˜¤í”„ë¼ì¸ ëŒ€ì‘** | ë„¤íŠ¸ì›Œí¬ ì—°ê²° í•´ì œ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€(Toast/Dialog) í‘œì‹œ | |

## 4. ê²°í•¨ ë“±ê¸‰ ê¸°ì¤€ (Defect Priority)
*   **P1 (Critical)**: ì•± êµ¬ë™ ë¶ˆê°€, ë¡œê·¸ì¸ ë¶ˆê°€, ë°ì´í„° ìœ ì‹¤ ë°œìƒ. **(ì¦‰ì‹œ í”½ìŠ¤/ë°°í¬ ì¤‘ë‹¨)**
*   **P2 (Major)**: ì£¼ìš” ê¸°ëŠ¥(ê²Œì‹œê¸€ ì‘ì„±, ì±„íŒ…) ë™ì‘ ì‹¤íŒ¨, ìš°íšŒ ë°©ë²• ì—†ìŒ.
*   **P3 (Minor)**: UI ê¹¨ì§(ì˜¤íƒ€, ë ˆì´ì•„ì›ƒ), ê°„í—ì  ë²„ê·¸, ì‚¬ìš©ì„± ë¶ˆí¸.
</script>

    <script type="text/markdown" id="md-07">
# 07. ë³´ì•ˆ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸ (Security Checklist)

ë³¸ ë¬¸ì„œëŠ” OWASP Mobile Top 10 ë° ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## 1. ì·¨ì•½ì  ë¶„ì„ ë³´ê³  (Code Analysis Findings)

### ğŸš¨ Critical Issues
1.  **SSL/TLS ê²€ì¦ ìš°íšŒ (Insecure HttpOverrides)**
    *   **íŒŒì¼**: `lib/main.dart` (Line 59~72 `InsecureHttpOverrides`)
    *   **ë‚´ìš©**: `host == 'lhes.co.kr'` ë„ë©”ì¸ ë“±ì— ëŒ€í•´ ì¸ì¦ì„œ ê²€ì¦ì„ ê°•ì œë¡œ `true` ë°˜í™˜.
    *   **ìœ„í—˜**: ì¤‘ê°„ì ê³µê²©(MITM)ì— ì·¨ì•½í•¨. ê°œë°œ ì„œë²„ìš©ì´ë¼ë©´ ë°°í¬ ì‹œ ë°˜ë“œì‹œ ì œê±°í•´ì•¼ í•¨.

2.  **Hardcoded Server IP**
    *   **íŒŒì¼**: `lib/common/const/data.dart`
    *   **ë‚´ìš©**: `110.10.147.37` IP ë…¸ì¶œ.
    *   **ìœ„í—˜**: IP ë³€ê²½ ì‹œ ëŒ€ì‘ ë¶ˆê°€ ë° ê³µê²© ëŒ€ìƒ ë…¸ì¶œ ê°€ëŠ¥ì„±.

### âœ… Good Practices
1.  **Secure Storage ì‚¬ìš©**
    *   **ë‚´ìš©**: Access/Refresh Tokenì„ `flutter_secure_storage`ì— ì €ì¥í•˜ì—¬ ê¸°ê¸° ë‚´ í‰ë¬¸ ì €ì¥ ë°©ì§€.
    *   **íŒŒì¼**: `lib/common/secure_storage/secure_storage.dart`

2.  **Token Refresh Logic**
    *   **ë‚´ìš©**: 401 ë°œìƒ ì‹œ Silent Refresh ìˆ˜í–‰ìœ¼ë¡œ ì‚¬ìš©ì í¸ì˜ì„± ë° ì„¸ì…˜ ê´€ë¦¬ êµ¬í˜„ë¨.

## 2. ë³´ì•ˆ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ì¹´í…Œê³ ë¦¬ | í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|:---:|:---|:---:|:---|
| **M1: ê¶Œí•œ ì‚¬ìš©** | ì¹´ë©”ë¼/ê°¤ëŸ¬ë¦¬ ë“± ë¯¼ê° ê¶Œí•œ ìš”ì²­ ì‹œ ê·¼ê±° ëª…ì‹œ | í™•ì¸í•„ìš” | `AndroidManifest.xml`, `Info.plist` í™•ì¸ í•„ìš” |
| **M2: ë°ì´í„° ì €ì¥** | ë¡œê·¸ì— ë¯¼ê°ì •ë³´(ë¹„ë°€ë²ˆí˜¸, í† í°) ì¶œë ¥ ê¸ˆì§€ | **ì·¨ì•½** | `dio.dart`ì˜ `Generic interceptor`ì—ì„œ `print`ë¬¸ ì‚¬ìš© ì¤‘. `debugPrint`ë¡œ êµì²´í•˜ê±°ë‚˜ ë¦´ë¦¬ì¦ˆ ëª¨ë“œì—ì„œ ë¹„í™œì„±í™” í•„ìš”. |
| **M3: í†µì‹  ë³´ì•ˆ** | ëª¨ë“  HTTP í†µì‹ ì— HTTPS ì ìš© | **ì·¨ì•½** | SSL Bypass ì½”ë“œ ì¡´ì¬. |
| **M4: ì¸ì¦** | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ì°¾ê¸° ì‹œ 2FA ì œê³µ ë“± | í™•ì¸ë¶ˆê°€ | ì„œë²„ ë¡œì§ í™•ì¸ í•„ìš”. |
| **M5: ì…ë ¥ ê²€ì¦** | XSS ë°©ì§€ (HTML ë Œë”ë§ ì‹œ) | í™•ì¸í•„ìš” | `flutter_html` ì‚¬ìš© ì¤‘. `UserMeRepository` ë“±ì—ì„œ ì…ë ¥ê°’ ê²€ì¦ í•„ìš”. |

## 3. ê¶Œê³  ì‚¬í•­ (Recommendations)
1.  **í”„ë¡œë•ì…˜ ë°°í¬ ì „ `main.dart`ì˜ `HttpOverrides` ì½”ë“œ ì‚­ì œ í˜¹ì€ `#if DEBUG` ì²˜ë¦¬.**
2.  `print()` í•¨ìˆ˜ë¥¼ `log()` í˜¹ì€ ë˜í¼ í•¨ìˆ˜ë¡œ ë³€ê²½í•˜ì—¬ ë¦´ë¦¬ì¦ˆ ë¹Œë“œì—ì„œ ë¡œê·¸ê°€ ë‚¨ì§€ ì•Šë„ë¡ ì¡°ì¹˜.
3.  ì•± ë‚œë…í™”(`--obfuscate`) ì ìš©í•˜ì—¬ ë¹Œë“œ ë° ë°°í¬.
</script>

    <script type="text/markdown" id="md-08">
# 08. ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ (Changelog Template)

## [v1.0.0] - 2025-12-19
### ğŸš€ ì£¼ìš” ë³€ê²½ì‚¬í•­ (Highlights)
*   ìµœì´ˆ ì•± ë¦´ë¦¬ì¦ˆ (Android / iOS)
*   [ê¸°ëŠ¥ A] ì¶”ê°€
*   [ê¸°ëŠ¥ B] ê°œì„ 

### âœ¨ ì‹ ê·œ ê¸°ëŠ¥ (New Features)
*   íšŒì›ê°€ì…/ë¡œê·¸ì¸ (ìë™ë¡œê·¸ì¸ í¬í•¨)
*   ìœ„í—˜ì„± í‰ê°€ ê²Œì‹œíŒ CRUD
*   ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥

### ğŸ› ë²„ê·¸ ìˆ˜ì • (Bug Fixes)
*   [FIX] ë¡œê·¸ì¸ ì‹œ ê°„í—ì  401 ì˜¤ë¥˜ ìˆ˜ì •
*   [FIX] ì±„íŒ…ë°© ëª©ë¡ ê°±ì‹  ì•ˆ ë˜ëŠ” ë¬¸ì œ í•´ê²°

### âš™ï¸ DB / API ë³€ê²½ (Server Changes)
*   `User` í…Œì´ë¸”: `last_login_at` ì»¬ëŸ¼ ì¶”ê°€
*   API: `POST /board-risk` íŒŒë¼ë¯¸í„° ë³€ê²½

### âš ï¸ ì£¼ì˜ì‚¬í•­ (Notes)
*   ê¸°ì¡´ ì•± ë°ì´í„° í˜¸í™˜ ë¶ˆê°€ë¡œ **ì¬ì„¤ì¹˜** í•„ìš”í•©ë‹ˆë‹¤.
*   ì„œë²„ ì¬ì‹œì‘(PM2 reload)ì´ **2024-00-00 22:00**ì— ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
</script>

    <script>
        function renderDocs() {
            const navContainer = document.getElementById('nav-links');
            const contentContainer = document.getElementById('content');

            // Document List
            const docIds = ['md-00', 'md-01', 'md-02', 'md-03', 'md-04', 'md-05', 'md-06', 'md-07', 'md-08'];
            const docTitles = [
                '00_INDEX (ë¬¸ì„œ ëª©ë¡)',
                '01_OVERVIEW (ê°œìš”)',
                '02_ARCHITECTURE (ì•„í‚¤í…ì²˜)',
                '03_API_SPEC (API ëª…ì„¸)',
                '04_DATA_MODEL (ë°ì´í„° ëª¨ë¸)',
                '05_DEPLOYMENT_RUNBOOK (ë°°í¬/ìš´ì˜)',
                '06_TESTING_QA (í…ŒìŠ¤íŠ¸/QA)',
                '07_SECURITY_CHECKLIST (ë³´ì•ˆ ì ê²€)',
                '08_CHANGELOG (ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸)'
            ];

            // Initialize libraries
            marked.setOptions({
                highlight: function (code, lang) {
                    const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                    return hljs.highlight(code, { language }).value;
                },
                langPrefix: 'hljs language-'
            });
            mermaid.initialize({ startOnLoad: false, theme: 'default' });

            docIds.forEach((id, index) => {
                const rawContent = document.getElementById(id).textContent;
                const docTitle = docTitles[index];
                const sectionId = id.replace('md-', 'doc-');

                // 1. Navbar Link
                const navItem = document.createElement('a');
                navItem.className = 'nav-item';
                navItem.textContent = docTitle;
                navItem.href = '#' + sectionId;
                navItem.onclick = (e) => {
                    e.preventDefault();
                    document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
                    document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                    navItem.classList.add('active');
                };
                navContainer.appendChild(navItem);

                // 2. Render Content
                const section = document.createElement('div');
                section.id = sectionId;
                section.className = 'doc-section';

                // Render basic markdown
                section.innerHTML = marked.parse(rawContent);
                contentContainer.appendChild(section);

                // Add Divider
                if (index < docIds.length - 1) {
                    const hr = document.createElement('div');
                    hr.className = 'doc-divider';
                    contentContainer.appendChild(hr);
                }
            });

            // 3. Render Mermaid Diagrams
            setTimeout(() => {
                mermaid.run().catch(err => console.error('Mermaid render error:', err));
            }, 500);

            // Scroll Spy (Optional: Highlight nav item on scroll)
            window.addEventListener('scroll', () => {
                let current = '';
                document.querySelectorAll('.doc-section').forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (scrollY >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });
                document.querySelectorAll('.nav-item').forEach(li => {
                    li.classList.remove('active');
                    if (li.getAttribute('href') === '#' + current) {
                        li.classList.add('active');
                    }
                });
            });
        }

        window.onload = renderDocs;
    </script>

</body>

</html>